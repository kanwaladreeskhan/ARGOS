cd "C:\Users\FC Technologies\Documents\AutoRE_Project"
venv\Scripts\activate
python app.py
DESKTOP-VEIPHS8\SQLEXPRESS
python class_diagram.py
plantuml class_diagram.puml
http://127.0.0.1:5000/download/diagram





diagram .py


# class_diagram.py
# Mixed mapping: Functional -> methods, Non-Functional/Domain -> attributes
# Usage:
#   (venv) > python class_diagram.py
#   > plantuml class_diagram.puml

import pyodbc
import re
import traceback
from datetime import datetime

# --- EDIT these to match your environment ---
SQL_SERVER = r"DESKTOP-VEIPHS8\SQLEXPRESS"   # change if needed
DATABASE = "AutoRE_DB"                       # change if needed
DRIVER = "{ODBC Driver 17 for SQL Server}"  # or your ODBC driver
# --------------------------------------------

def get_connection():
    conn_str = (
        f"DRIVER={DRIVER};"
        f"SERVER={SQL_SERVER};"
        f"DATABASE={DATABASE};"
        "Trusted_Connection=yes;"
    )
    return pyodbc.connect(conn_str)


def fetch_latest_requirements():
    """Return list of (Type, Description) tuples for the latest SubmissionID."""
    conn = get_connection()
    cursor = conn.cursor()
    cursor.execute("SELECT MAX(SubmissionID) FROM dbo.Requirements")
    row = cursor.fetchone()
    last_id = row[0] if row and row[0] is not None else None

    if not last_id:
        cursor.close()
        conn.close()
        return [], None

    cursor.execute("SELECT Type, Description FROM dbo.Requirements WHERE SubmissionID = ?", (last_id,))
    rows = cursor.fetchall()
    cursor.close()
    conn.close()
    return rows, last_id


import re

# --- manual mappings for common phrases (force good names/values) ---
manual_mappings = {
    "within 2 seconds": ("responseTime", "sec"),
    "within 3 seconds": ("responseTime", "sec"),
    "daily backups": ("backupPolicy", "daily"),
    "daily backup": ("backupPolicy", "daily"),
    "99.9% uptime": ("uptime", "99.9%"),
    "95%": ("successRate", "95%"),
    "payment methods should be paypal": ("paymentMethods", "PayPal"),
    "payment methods should be paypal and card": ("paymentMethods", "PayPal+Card"),
    "data privacy": ("privacy", "required"),
    "unauthorized access": ("unauthorizedAccess", "disallowed"),
    "generate reports": ("generateReports", None),
    # add more exact phrase mappings as you find them
}

def clean_text(txt: str) -> str:
    """Normalize text: remove double words, unify 'the system', trim spaces."""
    if not txt:
        return ""
    s = txt.strip().replace("\r", " ").replace("\n", " ")
    s = re.sub(r"\bthe\s+the\b", "the", s, flags=re.I)                 # 'the the' -> 'the'
    s = re.sub(r"\b(system\s+){2,}", "system ", s, flags=re.I)         # repeated 'system system'
    s = re.sub(r"\s+", " ", s).strip()
    # unify repeated "system shall/must"
    s = re.sub(r"\b(system\s+(shall|must|should)\s+)+", "the system shall ", s, flags=re.I)
    s = s.strip()
    return s

def _camel_case(parts):
    """Make camelCase from a list of parts."""
    if not parts:
        return ""
    first = parts[0]
    rest = [p.capitalize() for p in parts[1:]]
    return first + "".join(rest)

def statement_to_method(sentence: str) -> str:
    """Better method name generation, avoids 'theSystem' artifacts."""
    s = clean_text(sentence).lower()

    # exact manual mapping: if sentence matches key exactly, use mapping as method (no params)
    for k in manual_mappings:
        if k in s:
            key, val = manual_mappings[k]
            # if mapping points to attribute (val not None and small) treat as method only if val is None
            if val is None:
                return f"+{key}()"
            # if mapping looks like action, still return method with adjusted key
            if key:
                return f"+{key}()"

    # remove leading 'the system shall/must' if present
    s = re.sub(r"^(the\s+)?system\s+(shall|must|should)\s+", "", s, flags=re.I).strip()
    s = re.sub(r"[^\w\s]", " ", s)   # remove punctuation
    words = s.split()
    if not words:
        return "+doAction()"

    # choose a verb and a short object
    verbs = ["enable","allow","process","make","create","manage","generate","view","track","notify","approve",
             "login","register","update","delete","add","remove","search","filter","download","upload"]
    verb_idx = None
    for i,w in enumerate(words):
        if w in verbs:
            verb_idx = i
            verb = w
            break
    if verb_idx is None:
        verb = words[0]
        verb_idx = 0

    obj = []
    for w in words[verb_idx+1:verb_idx+4]:
        if w in ("to","with","by","and","using","within","for","the","a","an","of","should","be"):
            continue
        obj.append(w)

    if not obj:
        # fallback: pick a noun-looking word from remainder
        for w in words[verb_idx+1:]:
            if len(w) > 2:
                obj.append(w)
                break

    parts = [verb] + obj
    parts = ["".join(re.findall(r"[a-z0-9]+", p)) for p in parts if p]
    camel = _camel_case(parts)
    if re.match(r"^\d", camel):
        camel = "do" + camel
    return f"+{camel}()"

def statement_to_attribute(sentence: str) -> str:
    """Produce clean attribute : value pairs or '+name : String' fallback."""
    s = clean_text(sentence).lower()

    # check manual mappings first (exact phrase contain)
    for k, (name, val) in manual_mappings.items():
        if k in s:
            if val is None:
                # mapping meant to be treated as a method; fall back to attribute generic
                return f"+{name} : String"
            # normalize value tokens (e.g., 'daily' or '99.9%')
            return f"+{name} : {val}"

    # direct patterns: "within N seconds" -> responseTime : Ns
    m = re.search(r"within\s+(\d+(?:\.\d+)?)\s*seconds?", s)
    if m:
        return f"+responseTime : {m.group(1)}s"

    # percent uptime or numeric value
    m = re.search(r"(\d+(?:\.\d+)?%)\s*(uptime|availability|success|reliability)?", s)
    if m:
        val = m.group(1)
        key = m.group(2) or "uptime"
        return f"+{key} : {val}"

    # daily/weekly/monthly backups
    if re.search(r"\bdaily backup|daily backups\b", s):
        return "+backupPolicy : daily"
    if re.search(r"\bweekly backup|weekly backups\b", s):
        return "+backupPolicy : weekly"

    # common NFR nouns
    nouns = {
        "privacy": "privacy",
        "encryption": "encryption",
        "scalable":"scalability",
        "scalability":"scalability",
        "security":"security",
        "latency":"latency",
        "timeout":"timeout",
        "reports":"reports",
        "notifications":"notifications"
    }
    for token, key in nouns.items():
        if token in s:
            # try to capture a nearby value (daily/weekly/99% etc)
            val_match = re.search(r'(\d+(?:\.\d+)?%?)|daily|weekly|monthly|hourly', s)
            if val_match:
                return f"+{key} : {val_match.group(0)}"
            return f"+{key} : String"

    # fallback: use last 1-2 meaningful words as key, keep type String
    s = re.sub(r'[^\w\s]', ' ', s)
    parts = s.split()
    if not parts:
        return "+property : String"
    key_words = parts[-2:] if len(parts) >= 2 else parts[-1:]
    key = "".join(re.findall(r"[a-z0-9]+", " ".join(key_words)))
    key = re.sub(r'^\d+', '', key)   # remove leading digits if any
    if not key:
        key = "property"
    return f"+{key} : String"



# -------------------------
# The mixed generator
# -------------------------
def generate_class_diagram(requirements):
    """
    requirements: list of (Type, Description) tuples (Type from DB, e.g., 'Functional', 'Non-Functional', 'Domain', 'Inverse')
    Returns PlantUML text with attributes and methods.
    """
    uml_lines = ["@startuml", "skinparam classAttributeIconSize 0"]
    uml_lines.append("class Donor { }")
    uml_lines.append("class Admin extends Donor { }")
    uml_lines.append("class CampaignManager extends Donor { }")
    uml_lines.append("class System { }")

    # containers
   donor_attrs, donor_methods = set(), set()
admin_attrs, admin_methods = set(), set()
manager_attrs, manager_methods = set(), set()
system_attrs, system_methods = set(), set()

# ----------------------------------------------------
# AUTO-ADD DEFAULT ATTRIBUTES (DO NOT TOUCH MAPPING LOGIC)
# ----------------------------------------------------
DEFAULT_AUTO_ATTRIBUTES = {
    "Donor": {
        "+donorID : int",
        "+name : String",
        "+email : String",
        "+phone : String"
    },
    "Admin": {
        "+adminID : int",
        "+name : String",
        "+email : String",
        "+role : String"
    },
    "CampaignManager": {
        "+managerID : int",
        "+name : String",
        "+email : String",
        "+assignedCampaigns : int"
    },
    "System": {
        "+systemVersion : String",
        "+lastBackup : String",
        "+uptime : String"
    }
}

# Add default attributes into sets
donor_attrs.update(DEFAULT_AUTO_ATTRIBUTES["Donor"])
admin_attrs.update(DEFAULT_AUTO_ATTRIBUTES["Admin"])
manager_attrs.update(DEFAULT_AUTO_ATTRIBUTES["CampaignManager"])
system_attrs.update(DEFAULT_AUTO_ATTRIBUTES["System"])
# ----------------------------------------------------


for rtype, desc in requirements:
        if desc is None:
            continue
        text = clean_text(desc)
        text_l = text.lower()

        # Use DB Type if available to decide mapping: Functional -> method, else -> attribute
        is_functional = False
        if rtype and isinstance(rtype, str) and rtype.lower().startswith("functional"):
            is_functional = True

        # fallback heuristics: certain verbs indicate actions
        action_verbs = ("allow","enable","create","process","generate","view","track","notify","approve",
                        "login","register","update","delete","add","remove","download","upload","manage")
        if not is_functional:
            # if sentence clearly looks like an action, treat it functional
            if any(word in text_l for word in action_verbs):
                is_functional = True

        # generate method or attribute accordingly
        if is_functional:
            method = statement_to_method(text)
            # role detection
            if any(k in text_l for k in ("admin","administrator")):
                admin_methods.add(method)
            elif any(k in text_l for k in ("manager","campaign manager","campaign")):
                manager_methods.add(method)
            elif any(k in text_l for k in ("donor","user","client")):
                donor_methods.add(method)
            elif any(k in text_l for k in ("system","application","software")):
                system_methods.add(method)
            else:
                # heuristic fallback: donor for user-action words
                if any(k in text_l for k in ("login","register","donate","payment","receipt","profile")):
                    donor_methods.add(method)
                else:
                    system_methods.add(method)
        else:
            attr = statement_to_attribute(text)
            if any(k in text_l for k in ("admin","administrator")):
                admin_attrs.add(attr)
            elif any(k in text_l for k in ("manager","campaign manager","campaign")):
                manager_attrs.add(attr)
            elif any(k in text_l for k in ("donor","user","client")):
                donor_attrs.add(attr)
            elif any(k in text_l for k in ("system","application","software")):
                system_attrs.add(attr)
            else:
                # fallback to system attribute
                system_attrs.add(attr)

    # append attributes first, then methods (sorted for stable output)
    def append_items(cls_name, attrs_set, methods_set):
        for a in sorted(attrs_set):
            uml_lines.append(f"{cls_name} : {a}")
        for m in sorted(methods_set):
            uml_lines.append(f"{cls_name} : {m}")

    append_items("Donor", donor_attrs, donor_methods)
    append_items("Admin", admin_attrs, admin_methods)
    append_items("CampaignManager", manager_attrs, manager_methods)
    append_items("System", system_attrs, system_methods)

    # placeholders if some classes empty (keeps diagram looking good)
    if not admin_attrs and not admin_methods:
        uml_lines.append("Admin : manageSystemSettings()")
    if not manager_attrs and not manager_methods:
        uml_lines.append("CampaignManager : reviewCampaignReports()")

    uml_lines.append("@enduml")
    return "\n".join(uml_lines)


def save_to_file(content, filename="class_diagram.puml"):
    with open(filename, "w", encoding="utf-8") as f:
        f.write(content)
    print(f"‚úÖ UML code saved to {filename}")


# -------------------------
# MAIN
# -------------------------
if __name__ == "__main__":
    print("‚è≥ UML generator start:", datetime.now().isoformat())
    try:
        rows, sid = fetch_latest_requirements()
        if not rows:
            print("‚ö†Ô∏è No requirements found for latest submission. Exiting.")
        else:
            print(f"üìã Generating UML for SubmissionID = {sid} (items: {len(rows)})")
            uml_text = generate_class_diagram(rows)
            save_to_file(uml_text)
            print("üé® Now run: plantuml class_diagram.puml")
    except Exception:
        print("‚ùå Unexpected error:")
        traceback.print_exc()









html form




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Donation System - Requirement Collection Form</title>
    <style>
        :root {
            --primary-color: #2e7d32;
            --primary-light: #4caf50;
            --primary-dark: #1b5e20;
            --secondary-color: #f5f5f5;
            --text-color: #333;
            --border-color: #ddd;
            --error-color: #d32f2f;
            --success-color: #388e3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f9f9f9;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--secondary-color);
            border-radius: 8px;
        }
        
        .section-title {
            color: var(--primary-dark);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            font-size: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        .input-hint {
            display: block;
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }
        
        .progress-container {
            margin-bottom: 30px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #666;
        }
        
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        button:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.5);
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: #f0f0f0;
            color: var(--text-color);
        }
        
        .btn-secondary:hover {
            background-color: #e0e0e0;
        }
        
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .required::after {
            content: " *";
            color: var(--error-color);
        }
        
        .error-message {
            color: var(--error-color);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .success-message {
            background-color: #e8f5e9;
            color: var(--success-color);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            .form-section {
                padding: 15px;
            }
            
            .button-group {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Online Donation System</h1>
            <p class="subtitle">Help us build a better donation platform by sharing your requirements</p>
        </header>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">0% Complete</div>
        </div>
        
        <div class="success-message" id="successMessage">
            Thank you! Your requirements have been submitted successfully.
        </div>
        
        <form action="/submit" method="post" id="donationForm">
            <!-- Functional Requirements Section -->
            <div class="form-section">
                <h2 class="section-title">Functional Requirements</h2>
                <p class="input-hint">What the system should be able to do</p>
                
                <div class="form-group">
                    <label for="functional_1" class="required">What should the system allow a donor or user to do?</label>
                    <input type="text" id="functional_1" name="functional_1" placeholder="e.g. make online donations, track donation history">
                    <div class="error-message" id="error_functional_1">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="functional_2" class="required">What action should an admin be able to perform?</label>
                    <input type="text" id="functional_2" name="functional_2" placeholder="e.g. approve/remove campaigns, manage users">
                    <div class="error-message" id="error_functional_2">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="functional_3" class="required">What feature should a campaign manager have?</label>
                    <input type="text" id="functional_3" name="functional_3" placeholder="e.g. track donation progress, update campaign details">
                    <div class="error-message" id="error_functional_3">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="functional_4">How can donors track their donation history?</label>
                    <input type="text" id="functional_4" name="functional_4" placeholder="e.g. view past donations, download receipts">
                </div>
                
                <div class="form-group">
                    <label for="functional_5">How should users register and log in to the system?</label>
                    <input type="text" id="functional_5" name="functional_5" placeholder="e.g. email registration with password, social media login">
                </div>
                
                <div class="form-group">
                    <label for="functional_6" class="required">What payment methods should the system support?</label>
                    <input type="text" id="functional_6" name="functional_6" placeholder="e.g. credit card, PayPal, bank transfer">
                    <div class="error-message" id="error_functional_6">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="functional_7">How should the system notify donors about donation updates?</label>
                    <input type="text" id="functional_7" name="functional_7" placeholder="e.g. email or SMS notifications, in-app alerts">
                </div>
                
                <div class="form-group">
                    <label for="functional_8">How should the system handle recurring donations?</label>
                    <input type="text" id="functional_8" name="functional_8" placeholder="e.g. monthly automatic deductions, reminder emails">
                </div>
            </div>
            
            <!-- Non-Functional Requirements Section -->
            <div class="form-section">
                <h2 class="section-title">Non-Functional Requirements</h2>
                <p class="input-hint">How the system should perform</p>
                
                <div class="form-group">
                    <label for="nonfunc_1">How fast should the donation system respond to transactions?</label>
                    <input type="text" id="nonfunc_1" name="nonfunc_1" placeholder="e.g. within 3 seconds">
                </div>
                
                <div class="form-group">
                    <label for="nonfunc_2" class="required">What security/privacy feature is needed for donor data?</label>
                    <input type="text" id="nonfunc_2" name="nonfunc_2" placeholder="e.g. data encryption, privacy compliance">
                    <div class="error-message" id="error_nonfunc_2">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="nonfunc_3">What is the expected uptime or availability of the system?</label>
                    <input type="text" id="nonfunc_3" name="nonfunc_3" placeholder="e.g. 99.9% uptime">
                </div>
                
                <div class="form-group">
                    <label for="nonfunc_4">How should the system handle high traffic during fundraising campaigns?</label>
                    <input type="text" id="nonfunc_4" name="nonfunc_4" placeholder="e.g. scalable cloud servers, load balancing">
                </div>
                
                <div class="form-group">
                    <label for="nonfunc_5">How should the system ensure data backup and recovery?</label>
                    <input type="text" id="nonfunc_5" name="nonfunc_5" placeholder="e.g. daily backups, disaster recovery plan">
                </div>
                
                <div class="form-group">
                    <label for="nonfunc_6">What usability standards should the system follow?</label>
                    <input type="text" id="nonfunc_6" name="nonfunc_6" placeholder="e.g. responsive design, simple navigation">
                </div>
            </div>
            
            <!-- Domain-Specific Requirements Section -->
            <div class="form-section">
                <h2 class="section-title">Domain-Specific Requirements</h2>
                <p class="input-hint">Features specific to donation systems</p>
                
                <div class="form-group">
                    <label for="domain_1" class="required">Which domain feature is important in the donation system?</label>
                    <input type="text" id="domain_1" name="domain_1" placeholder="e.g. donation campaign management">
                    <div class="error-message" id="error_domain_1">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="domain_2">How should the system categorize donations by campaign or cause?</label>
                    <input type="text" id="domain_2" name="domain_2" placeholder="e.g. by charity, event, or project">
                </div>
                
                <div class="form-group">
                    <label for="domain_3">How should the system generate donation reports for NGOs or admins?</label>
                    <input type="text" id="domain_3" name="domain_3" placeholder="e.g. weekly, monthly, or custom reports">
                </div>
                
                <div class="form-group">
                    <label for="domain_4">How should the system manage donor profiles and preferences?</label>
                    <input type="text" id="domain_4" name="domain_4" placeholder="e.g. personal info, donation frequency, alerts">
                </div>
            </div>
            
            <!-- Inverse / Negative Requirements Section -->
            <div class="form-section">
                <h2 class="section-title">Security & Restrictions</h2>
                <p class="input-hint">What the system should NOT allow</p>
                
                <div class="form-group">
                    <label for="inverse_1" class="required">What should the system not allow in the donation system?</label>
                    <input type="text" id="inverse_1" name="inverse_1" placeholder="e.g. fraudulent transactions, unauthorized access">
                    <div class="error-message" id="error_inverse_1">This field is required</div>
                </div>
                
                <div class="form-group">
                    <label for="inverse_2">What actions or inputs should be restricted for unverified users?</label>
                    <input type="text" id="inverse_2" name="inverse_2" placeholder="e.g. cannot donate without verification">
                </div>
            </div>
            
            <div class="button-group">
                <button type="button" class="btn-secondary" id="resetBtn">Reset Form</button>
                <button type="submit" class="btn-primary">Submit Requirements</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('donationForm');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const successMessage = document.getElementById('successMessage');
            const resetBtn = document.getElementById('resetBtn');
            
            // Required fields
            const requiredFields = [
                'functional_1', 'functional_2', 'functional_3', 'functional_6',
                'nonfunc_2', 'domain_1', 'inverse_1'
            ];
            
            // Update progress bar
            function updateProgress() {
                let filledCount = 0;
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field && field.value.trim() !== '') {
                        filledCount++;
                    }
                });
                
                const progress = (filledCount / requiredFields.length) * 100;
                progressFill.style.width = `${progress}%`;
                progressText.textContent = `${Math.round(progress)}% Complete`;
            }
            
            // Validate form on submit
            form.addEventListener('submit', function() {
                 updateProgress();
                let isValid = true;
                
                // Clear previous errors
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Check required fields
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    const errorElement = document.getElementById(`error_${fieldId}`);
                    
                    if (!field.value.trim()) {
                        isValid = false;
                        errorElement.style.display = 'block';
                        field.style.borderColor = 'var(--error-color)';
                    } else {
                        field.style.borderColor = '';
                    }
                });
                
                if (isValid) {
                    // Show success message
                    successMessage.style.display = 'block';
                    
                    // In a real application, you would submit the form here
                    // form.submit();
                    
                    // For demo purposes, we'll just reset after a delay
                    setTimeout(() => {
                        successMessage.style.display = 'none';
                        form.reset();
                        updateProgress();
                    }, 3000);
                }
            });
            
            // Reset form
            resetBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to reset the form? All entered data will be lost.')) {
                    form.reset();
                    updateProgress();
                    
                    // Clear errors
                    document.querySelectorAll('.error-message').forEach(el => {
                        el.style.display = 'none';
                    });
                    
                    // Reset field borders
                    document.querySelectorAll('input').forEach(input => {
                        input.style.borderColor = '';
                    });
                }
            });
            
            // Update progress as user types
            form.addEventListener('input', function() {
                updateProgress();
            });
            
            // Initialize progress
            updateProgress();
        });
    </script>
</body>
</html>
<a href="https://imgbb.com/"><img src="https://i.ibb.co/hJ5PXZp5/Light-removebg-preview.png" alt="Light-removebg-preview" border="0"></a>
